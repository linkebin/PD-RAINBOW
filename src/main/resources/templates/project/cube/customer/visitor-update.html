<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"  xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="UTF-8">
    <title>来访者咨询登记</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/Styles/themes/default/style.css" rel="stylesheet" type="text/css" />
    <style>
        .default_hide{display: none;}
        .eui-form-label{width: 100px;
            text-align: left;}
        #visitorForm input + label{color: red;}
    </style>
</head>
<body>
<div class="questionHeader">
    <div class="eui-row">
        <h1 class="eui-col-md1 eui-marginL10"><a href="###"><img src="/Styles/images/xymfImages/logo.png" class="eui-marginT10" alt=""></a></h1>
        <p class="eui-col-md2 eui-color-white eui-font20 eui-padding10 eui-display-Ib questionTitle">来访者咨询管理</p>
    </div>
</div>

<div class="visitorContent">
    <div class="eui-area">
        <div class="visitorTitle">
            <img src="/Styles/images/xymfImages/cube.png" width="24" alt=""> 个人信息卡
        </div>
        <form id="visitorForm" onsubmit="return false;">
            <input type="hidden" name="id" th:value="${id}">
            <input type="hidden" name="creator" >
            <input type="hidden" name="createTime" >
            <input type="hidden" name="deleted" >
            <input type="hidden" name="visitorCode">

        <div class="eui-bg-white eui-padding20 visitor">
            <div class="eui-row eui-paddingB10 eui-borderB eui-marginB20">
                <div class="eui-col-md6 eui-font20">基本信息</div>
                <div class="eui-col-md6 eui-textAlignR eui-paddingT10 upward"><i class="eui-icon">&#xe619;</i> 收起</div>
            </div>
            <!--基本-->
             <div class="eui-bg-white eui-form visitorContent">
                <div class="eui-form-item">
                    <label class="eui-form-label">姓名</label>
                    <div class="eui-input-inline">
                        <input type="text" name="visitorName"   placeholder="姓名" class="eui-input">
                    </div>
                    <label class="eui-form-label">性别</label>
                    <div class="eui-input-inline">
                        <input type="radio" name="sex" value="1" title="男" checked="checked">
                        <input type="radio" name="sex" value="0" title="女">
                    </div>
                    <label class="eui-form-label">出生年月</label>
                    <div class="eui-input-inline">
                        <input type="text" class="eui-input" readonly="readonly" id="test1" name="birthday" placeholder="出生日期">
                    </div>
                </div>
                <div class="eui-form-item">
                    <label class="eui-form-label">身份证号</label>
                    <div class="eui-input-inline">
                        <input type="text" name="idCard"  placeholder="身份证" class="eui-input">
                    </div>
                    <label class="eui-form-label">联系方式</label>
                    <div class="eui-input-inline">
                        <input type="text" name="phone"  placeholder="联系方式" class="eui-input">
                    </div>
                    <label class="eui-form-label">民族</label>
                    <div class="eui-input-inline">
                        <input type="text" name="nation"  placeholder="请输入民族" class="eui-input">
                    </div>
                </div>



            <div id="addrs" data-toggle="distpicker">
                <div class="eui-form-item">
                    <label class="eui-form-label">所在地</label>
                    <div id="ld" data-toggle="distpicker">
                    <div class="eui-input-inline">
                        <select id="province" class="eui-input" e-ignore name="province">

                        </select>
                    </div>
                    <div class="eui-input-inline">
                        <select id="city" class="eui-input" e-ignore name="city">

                        </select>
                    </div>
                    <div class="eui-input-inline">
                        <select id="district" class="eui-input" e-ignore name="district">

                        </select>
                    </div>
                    </div>
                    <div class="eui-input-inline">
                        <input type="text" name="address"  placeholder="具体地址" class="eui-input" style="width: 250px;">
                    </div>
                </div>
            </div>

                 <div class="eui-form-item">
                     <label class="eui-form-label">职业</label>
                     <div class="eui-input-inline">
                         <select  class="eui-input" e-ignore1 name="occupation">
                             <option th:each="category:${selectOptionList}" th:value="${category.optionName}"
                                     th:text="${category.optionName}"  ></option>
                         </select>
                     </div>

                     <label class="eui-form-label">紧急联系人关系</label>
                     <div class="eui-input-inline">
                         <select  class="eui-input" name="exigenceContacts">
                             <option value="父子">父子</option>
                             <option value="母子">母子</option>
                             <option value="兄弟姐妹">兄弟姐妹</option>
                             <option value="朋友/同事">朋友/同事</option>
                         </select>
                     </div>
                     <label class="eui-form-label">紧急联系人电话</label>
                     <div class="eui-input-inline">
                         <input type="text" name="exigencePhone" placeholder="紧急联系人电话"  class="eui-input">
                     </div>
                 </div>

                 <div class="eui-form-item">
                     <label class="eui-form-label">血型</label>
                     <div class="eui-input-block">
                         <input type="radio" name="bloodType" value="A型" title="A型">
                         <input type="radio" name="bloodType" value="B型" title="B型">
                         <input type="radio" name="bloodType" value="AB型" title="AB型">
                         <input type="radio" name="bloodType" value="O型" title="O型">
                     </div>
                 </div>

                <div class="eui-form-item">
                    <label class="eui-form-label">教育程度</label>
                    <div class="eui-input-block">
                        <input type="radio" name="educationLevel" value="1" title="小学" >
                        <input type="radio" name="educationLevel" value="2" title="初中">
                        <input type="radio" name="educationLevel" value="3" title="高中">
                        <input type="radio" name="educationLevel" value="4" title="专科">
                        <input type="radio" name="educationLevel" value="5" title="本科">
                        <input type="radio" name="educationLevel" value="6" title="研究生">
                        <input type="radio" name="educationLevel" value="7" title="博士">
                    </div>
                </div>
                <div class="eui-form-item" pane="">
                    <label class="eui-form-label">宗教信仰</label>
                    <div class="eui-input-block">
                        <input type="radio" name="religiousBelief" value="0" title="没有" checked="checked">
                        <input type="radio" name="religiousBelief" value="1" title="基督教">
                        <input type="radio" name="religiousBelief" value="2" title="佛教">
                        <input type="radio" name="religiousBelief" value="3" title="道教">
                        <input type="radio" name="religiousBelief" value="4" title="天主教">
                        <input type="radio" name="religiousBelief" value="5" title="伊斯兰教">
                    </div>
                </div>

                 <div class="eui-form-item">
                     <label class="eui-form-label">婚姻情况</label>
                     <div class="eui-input-block">
                         <input type="radio" name="maritalStatus" e-filter="maritalStatus" value="1"  title="未婚" checked="checked">
                         <input type="radio" name="maritalStatus" e-filter="maritalStatus" value="2" title="已婚">
                         <input type="radio" name="maritalStatus" e-filter="maritalStatus" value="3" title="已婚分居">
                         <input type="radio" name="maritalStatus" e-filter="maritalStatus" value="4" title="再婚">
                         <input type="radio" name="maritalStatus" e-filter="maritalStatus" value="5" title="离婚独居">
                         <input type="radio" name="maritalStatus" e-filter="maritalStatus" value="6" title="丧偶独居">
                     </div>
                 </div>
                <div style="display: none" class="marital">
                 <div class="eui-form-item">
                     <label class="eui-form-label">结婚年数</label>
                     <div class="eui-input-inline">
                         <input type="text" name="marryTotal"   placeholder="结婚年数" class="eui-input">
                     </div>

                     <label class="eui-form-label">是否有孩子</label>
                     <div class="eui-input-inline">
                         <input type="radio" e-filter="Have_children" name="Have_children" id="Have_children1"  value="1" title="有">
                         <input type="radio" e-filter="Have_children" name="Have_children" value="0" title="无" checked="checked">
                         </div>
                     <div style="display:none;" class="Have_children">
                         <label class="eui-form-label">有几个孩子</label>
                         <div class="eui-input-inline">
                             <input type="text" name="childrenTotal"   placeholder="有几个孩子" class="eui-input">
                         </div>
                     </div>
                 </div>

                 <div style="display: none;" class="eui-form-item children_info">
                     <label class="eui-form-label">孩子性别</label>
                     <div class="eui-input-inline">
                         <input type="radio" name="childSex" value="1" title="男" checked="checked">
                         <input type="radio" name="childSex" value="0" title="女">
                     </div>
                     <label class="eui-form-label">孩子年龄</label>
                     <div class="eui-input-inline">
                         <input type="text" name="childAge"   placeholder="孩子年龄" class="eui-input">
                     </div>
                 </div>
                </div>
            </div>
        </div>


            <!--家庭-->
        <div class="eui-bg-white eui-padding20 visitor">
            <div class="eui-row eui-paddingB10 eui-borderB eui-marginB20">
                <div class="eui-col-md6 eui-font20">家庭情况</div>
                <div class="eui-col-md6 eui-textAlignR eui-paddingT10 upward"><i class="eui-icon">&#xe619;</i> 收起</div>
            </div>
             <div class="eui-bg-white visitorContent eui-form">
                 <div class="eui-form-item">
                     <label class="eui-form-label">父亲是否健在</label>
                     <div class="eui-input-inline">
                         <input type="radio" e-filter="father_is_alive" name="father_is_alive" value="1" title="是" checked="checked">
                         <input type="radio" e-filter="father_is_alive" name="father_is_alive" value="0" title="否">
                     </div>
                 </div>

                 <div class="eui-form-item">

                     <div style="display: none;" class="father_leave">
                         <label style="width: 150px" class="eui-form-label">父亲去世时你的年龄</label>
                         <div class="eui-input-inline">
                             <input type="text" name="fatherDeathYourAge"   placeholder="父亲去世时你的年龄" class="eui-input">
                         </div>
                     </div>

                     <div style="display: block;" class="father_info">
                         <label class="eui-form-label">父亲职业</label>
                         <div class="eui-input-inline">
                             <select  class="eui-input" e-ignore1 name="fatherOccupation">
                                 <option th:each="category:${selectOptionList}" th:value="${category.optionName}"
                                         th:text="${category.optionName}"  ></option>
                             </select>
                         </div>

                         <label class="eui-form-label">父亲年龄</label>
                         <div class="eui-input-inline">
                             <input type="text" name="fatherAge"   placeholder="父亲年龄" class="eui-input">
                         </div>

                         <label class="eui-form-label">父亲学历</label>
                         <div class="eui-input-inline">
                             <input type="text" name="fatherEducation"   placeholder="父亲学历" class="eui-input">
                         </div>
                     </div>

                 </div>


                 <div class="eui-form-item">
                     <label class="eui-form-label">母亲是否健在</label>
                     <div class="eui-input-inline">
                         <input type="radio" e-filter="mother_is_alive" name="mother_is_alive" value="1" title="是" checked="checked">
                         <input type="radio" e-filter="mother_is_alive" name="mother_is_alive" value="0" title="否">
                     </div>
                 </div>

                 <div class="eui-form-item">

                     <div style="display: none;" class="mother_leave">
                         <label  style="width: 150px" class="eui-form-label">母亲去世时你的年龄</label>
                         <div class="eui-input-inline">
                             <input type="text" name="motherDeathYourAge"   placeholder="母亲去世时你的年龄" class="eui-input">
                         </div>
                     </div>

                     <div style="display: block;" class="mother_info">
                         <label class="eui-form-label">母亲职业</label>
                         <div class="eui-input-inline">
                             <select  class="eui-input" id="motherOccupation" e-ignore1 name="motherOccupation">
                                 <option th:each="category:${selectOptionList}" th:value="${category.optionName}"
                                         th:text="${category.optionName}"  ></option>
                             </select>
                         </div>

                         <label class="eui-form-label">母亲年龄</label>
                         <div class="eui-input-inline">
                             <input type="text" name="motherAge"   placeholder="母亲年龄" class="eui-input">
                         </div>

                         <label class="eui-form-label">母亲学历</label>
                         <div class="eui-input-inline">
                             <input type="text" name="motherEducation"   placeholder="母亲学历" class="eui-input">
                         </div>

                     </div>
                 </div>

                 <div class="eui-form-item">
                     <label class="eui-form-label">父母是否分居</label>
                     <div class="eui-input-inline">
                         <input type="radio" e-filter="parental_separation" id="parental_separation1" name="parental_separation" value="1" title="是">
                         <input type="radio" e-filter="parental_separation"  name="parental_separation" value="0" title="否" checked="checked">
                     </div>

                     <div style="display: none" class="parentalSeparationYourAge">
                         <label style="width: 150px;" class="eui-form-label">父母分居时你的年龄</label>
                         <div class="eui-input-inline">
                             <input type="text" name="parentalSeparationYourAge"   placeholder="父母分居时你的年龄" class="eui-input">
                         </div>
                     </div>
                 </div>

                 <div class="eui-form-item">
                     <label class="eui-form-label">父母是否离婚</label>
                     <div class="eui-input-inline">
                         <input type="radio" e-filter="divorce" id="divorce1" name="divorce" value="1" title="是">
                         <input type="radio" e-filter="divorce" name="divorce" value="0" title="否" checked="checked">
                     </div>

                     <div style="display: none;" class="divorce">
                         <label style="width: 150px;" class="eui-form-label">父母离婚时你的年龄</label>
                         <div class="eui-input-inline">
                             <input type="text" name="parentalDivorceYourAge"   placeholder="父母离婚时你的年龄" class="eui-input">
                         </div>
                     </div>
                 </div>

                 <div class="eui-form-item">
                     <label class="eui-form-label">兄弟姐妹人数</label>
                     <div class="eui-input-inline">
                        <input type="text" name="brothersSistersTotal" class="eui-input" placeholder="兄弟姐妹人数">
                     </div>

                     <div class="default_show">
                         <label style="width: 150px;" class="eui-form-label">排行第几</label>
                         <div class="eui-input-inline">
                             <input type="text" name="brothersSistersRanking"   placeholder="排行第几" class="eui-input">
                         </div>
                     </div>
                 </div>
            </div>
        </div>

            <!--咨询-->
        <div class="eui-bg-white eui-padding20 visitor">
            <div class="eui-row eui-paddingB10 eui-borderB eui-marginB20">
                <div class="eui-col-md6 eui-font20">咨询情况</div>
                <div class="eui-col-md6 eui-textAlignR eui-paddingT10 upward"><i class="eui-icon">&#xe619;</i> 收起</div>
            </div>
             <div class="eui-bg-white visitorContent eui-form">

                 <div class="eui-form-item">
                     <label class="eui-form-label" style="width: 240px;">以前进行过心里咨询吗？</label>
                     <div class="eui-input-inline">
                         <input type="radio" e-filter="psychologicalCounseling" name="psychologicalCounseling" value="0" title="没有">
                         <input type="radio" e-filter="psychologicalCounseling" name="psychologicalCounseling" value="1" title="有">
                     </div>

                     <div style="display: none" class="consult_info">
                         <label style="width: 240px;" class="eui-form-label">做过几次咨询</label>
                         <div class="eui-input-inline">
                             <input type="text" name="counselingTotal"   placeholder="做过几次咨询" class="eui-input">
                         </div>
                     </div>
                 </div>

                 <div style="display: none;" class="consult_info">
                     <div class="eui-form-item">
                         <label style="width: 240px;" class="eui-form-label">最近一次咨询距现在多少天</label>
                         <div class="eui-input-inline">
                             <input type="text" name="awayNowTotal"   placeholder="最近一次咨询距现在多少天" class="eui-input">
                         </div>

                         <label style="width: 240px;" class="eui-form-label">最近一次咨询的地址</label>
                         <div class="eui-input-inline">
                             <input type="text" name="counselingAddress"   placeholder="最近一次咨询的地址" class="eui-input">
                         </div>


                     </div>
                 </div>

                 <div style="display: none;" class="consult_info">
                     <div class="eui-form-item">
                         <label style="width: 240px;" class="eui-form-label">是否因心理问题就医</label>
                         <div class="eui-input-inline">
                             <input type="radio" name="medicalTreatment" value="0" title="没有">
                             <input type="radio" name="medicalTreatment" value="1" title="有">
                         </div>

                         <label style="width: 240px;" class="eui-form-label">最近一次诊断结果</label>
                         <div class="eui-input-inline">
                             <input type="text" name="diagnosisResult"   placeholder="最近一次诊断结果" class="eui-input">
                         </div>
                     </div>
                 </div>

                 <div class="eui-form-item">

                     <label class="eui-form-label" style="width: 240px;">是否慢性疾病,家族病史和过敏史</label>
                     <div class="eui-input-inline">
                         <input type="radio" e-filter="medicalHistory" name="medicalHistory" value="0" title="没有">
                         <input type="radio" e-filter="medicalHistory" name="medicalHistory" value="1" title="有">
                     </div>
                    <div style="display: none" class="medicalHistory">
                     <label class="eui-form-label">具体情况</label>
                     <div class="eui-input-inline">
                         <input type="text" name="specificCircumstances" style="width: 370px"  placeholder="具体情况" class="eui-input">
                     </div>
                    </div>
                 </div>

                 <div class="eui-form-item">

                     <label class="eui-form-label" style="width: 240px;">曾长期服用过何种药物?</label>
                     <div class="eui-input-inline">
                         <input type="radio" e-filter="longMedication" name="longMedication" value="0" title="没有">
                         <input type="radio" e-filter="longMedication"  name="longMedication" value="1" title="有">
                     </div>
                     <div style="display: none" class="LongMedication">
                     <label class="eui-form-label">药物不良症状</label>
                     <div class="eui-input-inline">
                         <input type="text" name="adverseDrugSymptoms" style="width: 370px"  placeholder="药物不良症状" class="eui-input">
                     </div>
                     </div>
                 </div>

                 <div class="eui-form-item">
                     <label style="width: 240px;" class="eui-form-label">目前与健康有关的疾病及所接受的治疗</label>
                     <div class="eui-input-inline">
                         <input type="text" name="treatmentCondition"   placeholder="目前与健康有关的疾病及所接收的治疗" class="eui-input eui-width700">
                     </div>
                 </div>


            </div>
        </div>


        <div class="eui-textAlignC eui-bg-white eui-padding20">
            <span onclick="formSub()" class="eui-btn eui-btn-normal eui-btn-big">
                <img src="/Styles/images/xymfImages/submit.png" width="24" alt=""> 保存信息</span>
        </div>

            <input type="submit" id="sub" style="display: none;" value="提交" />
        </form>
    </div>
    </div>

</div>
<div class="xymfFooter">
    <div class="eui-area eui-row">
        <div class="eui-col-md2">
            <dl class="eui-lineHeight24 eui-color-gray3">
                <dt class="eui-darkgreen eui-font16 eui-paddingTB20">关于我们</dt>
                <dd>关于我们</dd>
                <dd>注册协议</dd>
                <dd>保密协议</dd>
                <dd>帮助中心</dd>
            </dl>
        </div>
        <div class="eui-col-md3">
            <dl>
                <dt class="eui-darkgreen eui-font16 eui-paddingTB20">联系我们</dt>
                <dd class="visitorPhone1 eui-marginB20">
                    <p class="eui-darkgreen eui-font16">020-82314165</p>
                    <p class="eui-color-gray3 eui-font12">平台全国服务热线</p>
                </dd>
                <dd class="visitorPhone2">
                    <p class="eui-darkgreen eui-font16">15622183952</p>
                    <p class="eui-color-gray3 eui-font12">24小时移动热线，实时在您的身边</p>
                </dd>
            </dl>
        </div>
        <div class="eui-col-md2 eui-col-md-offset5 eui-textAlignR">
            <dl>
                <dt class="eui-darkgreen eui-font16 eui-padding20">微信公众号</dt>
                <dd><img src="/Styles/images/xymfImages/QRcode.png" alt=""></dd>
            </dl>
        </div>
    </div>
</div>




<!-- 返回顶部按钮 -->
<span class="eui-icon eui-backTop" e-type="top">&#xe604;</span>

<script src="/Scripts/module/eui.js"></script>
<script type="text/javascript" src="/Scripts/jquery-1.9.0.min.js"></script>
<script src="/Scripts/plugins/distpicker.data.js"></script>
<script src="/Scripts/plugins/distpicker.js"></script>
<script src="/Scripts/plugins/jquery.validate.js"></script>
<script src="/pack.ajax.js"></script>
<script>

eui.use(['form', 'layedit', 'laydate'], function(){
    var form = eui.form
    ,layer = eui.layer
    ,layedit = eui.layedit
    ,laydate = eui.laydate;

    //常规用法
    laydate.render({
        elem: '#test1'
    });

    form.on('radio(maritalStatus)', function(data){
        if (data.value !='1'){
            $('.marital').show();
            $('.marital input').removeAttr('disabled');
        }else {
            $('.marital').hide();
            $('.marital input').attr('disabled','disabled');
        }
    });

    form.on('radio(Have_children)', function(data){
        if (data.value =='1'){
            $('.Have_children').show();
            $('.Have_children input').removeAttr('disabled');
        }else {
            $('.Have_children').hide();
            $(".children_info").hide();
            $("input[name='childrenTotal']").val('');
            $('.Have_children input').attr('disabled','disabled');
        }
    });
    form.on('radio(father_is_alive)', function(data){
        if (data.value =='1'){
            $('.father_info').show();
            $('.father_leave').hide();

            $('.father_info input').removeAttr('disabled');
            $('.father_leave input').attr('disabled','disabled');
        }else {
            $('.father_info').hide();
            $('.father_leave').show();
            $('.father_info input').attr('disabled','disabled');
            $('.father_leave input').removeAttr('disabled');
        }
    });

    form.on('radio(mother_is_alive)', function(data){
        if (data.value =='1'){
            $('.mother_info').show();
            $('.mother_leave').hide();

            $('.mother_info input').removeAttr('disabled');
            $('.mother_leave input').attr('disabled','disabled');
        }else {
            $('.mother_info').hide();
            $('.mother_leave').show();
            $('.mother_info input').attr('disabled','disabled');
            $('.mother_leave input').removeAttr('disabled');
        }
    });

    form.on('radio(parental_separation)', function(data){
        if (data.value =='1'){
            $('.parentalSeparationYourAge').show();
            $('.parentalSeparationYourAge input').removeAttr('disabled');
        }else {
            $('.parentalSeparationYourAge').hide();
            $('.parentalSeparationYourAge input').attr('disabled','disabled');
        }
    });

    form.on('radio(divorce)', function(data){
        if (data.value =='1'){
            $('.divorce').show();
            $('.divorce input').removeAttr('disabled');
        }else {
            $('.divorce').hide();
            $('.divorce input').attr('disabled','disabled');

        }
    });

    form.on('radio(psychologicalCounseling)', function(data){
        if (data.value =='1'){
            $('.consult_info').show();
            $('.consult_info input').removeAttr('disabled');
        }else {
            $('.consult_info').hide();
            $('.consult_info input').attr('disabled','disabled');
        }
    });
    form.on('radio(medicalHistory)', function(data){
        if (data.value =='1'){
            $('.medicalHistory').show();
            $('.medicalHistory input').removeAttr('disabled');
        }else {
            $('.medicalHistory').hide();
            $('.medicalHistory input').attr('disabled','disabled');
        }
    });

    form.on('radio(longMedication)', function(data){
        if (data.value =='1'){
            $('.LongMedication').show();
            $('.LongMedication input').removeAttr('disabled');
        }else {
            $('.LongMedication').hide();
            $('.LongMedication input').attr('disabled','disabled');

        }
    });

});

$(function () {

    $.post('/visitor/register/detail',{id:$("#visitorForm input[name='id']").val()},function (result) {
        console.log(result)

        $("#visitorForm").setForm(result.data);
        var obj = result.data;

        $("#visitorForm select[name='motherOccupation'] option").each(function(){
            if($(this).text() === result.data.motherOccupation){
                $(this).attr('selected', 'selected');
            }
        });
        $("#visitorForm select[name='fatherOccupation'] option").each(function(){
            if($(this).text() === result.data.fatherOccupation){
                $(this).attr('selected', 'selected');
            }
        });

        $("#visitorForm select[name='occupation'] option").each(function(){
            if($(this).text() === result.data.occupation){
                $(this).attr('selected', 'selected');
            }
        });
        $("#visitorForm select[name='exigenceContacts'] option").each(function(){
            if($(this).text() === result.data.exigenceContacts){
                $(this).attr('selected', 'selected');
            }
        });
        if (obj.childrenTotal!=''){
            $('.children_info').show();
            $('#Have_children1').attr('checked','checked');
        }

        if (obj.maritalStatus !='1'){
            $('.marital').show();
        }

        if (obj.fatherDeathYourAge!=''){
            $('.father_info').hide();
            $('.father_leave').show();
        }else {
            $('.father_info').show();
            $('.father_leave').hide();
        }

        if (obj.motherDeathYourAge!=''){
            $('.mother_info').hide();
            $('.mother_leave').show();
        }else {
            $('.mother_info').show();
            $('.mother_leave').hide();
        }

        if (obj.parentalSeparationYourAge!=''){
            $('#parental_separation1').attr('checked','checked');
            $('.parentalSeparationYourAge').show();
        }else {
            $('.parentalSeparationYourAge').hide();
        }
        if (obj.parentalDivorceYourAge!=''){
            $('#divorce1').attr('checked','checked');
            $('.divorce').show();
        }

        if (obj.counselingTotal!=''){
            $('.consult_info').show();
        }

        if (obj.specificCircumstances!=''){
            $('.medicalHistory').show();
        }
        if (obj.adverseDrugSymptoms!=''){
            $('.LongMedication').show();
        }

        eui.use(['form', 'layedit', 'laydate'], function(){
            var form = eui.form

            form.render();
        });
    });




   $("input[name='childrenTotal']").blur(function () {
       var v = $(this).val();
       if (v!=''){
           $(".children_info").show();
       }else {
           $(".children_info").hide();
       }
   }) ;
    jQuery.validator.addMethod("isMobile", function(value, element) {
        var length = value.length;
        var mobile = /^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;
        return this.optional(element) || (length == 11 && mobile.test(value));
    }, "请正确填写您的手机号码");


    $("#visitorForm").validate({
        rules: {
            visitorName: {
                required : true,
            },
            birthday:{
                required : true,
            },
            idCard:{
                required : true,
            },
            phone:{
                required : true,
                minlength : 11,
                isMobile : true
            },
            address:{
                required : true,
            },
            exigencePhone:{
                required : true,
                minlength : 11,
                isMobile : true
            },
            marryTotal:{
                required : true,
                digits:true
            },
            fatherDeathYourAge:{
                required : true,
                digits:true
            },
            fatherEducation:{
                required : true,
            },
            motherDeathYourAge:{
                required : true,
                digits:true
            },
            motherEducation:{
                required : true,
            },
            parentalSeparationYourAge:{
                required : true,
                digits:true
            },
            parentalDivorceYourAge:{
                required : true,
                digits:true
            },
            brothersSistersTotal:{
                required : true,
                digits:true
            },
            brothersSistersRanking:{
                required : true,
                digits:true
            },
            counselingTotal:{
                required : true,
                digits:true
            },
            awayNowTotal:{
                required : true,
                digits:true
            },
            counselingAddress:{
                required : true,
            },
            diagnosisResult:{
                required : true,
            },
            specificCircumstances:{
                required : true,
            },

            nation:{
                required : true,
            },
            motherAge:{
                required : true,
                digits:true
            },
            fatherAge:{
                required : true,
                digits:true
            }



        },
        messages: {
            visitorName: {
                required : "请输入客户名称",
            },
            birthday:{
                required : '请选择出生日期',
            },
            idCard:{
                required : '请输入身份证号码',
            },
            phone:{
                required : '请输入手机号码',
                minlength : "确认手机不能小于11个字符",
                isMobile : "请正确填写您的手机号码"
            },
            address:{
                required : '请输入地址',
            },
            exigencePhone:{
                required : '请输入紧急联系人电话',
                minlength : "确认手机不能小于11个字符",
                isMobile : "请正确填写您的手机号码"
            },
            marryTotal:{
                required : '请输入结婚年数',
                digits:'只能输入整数'
            },
            fatherDeathYourAge: {
                required: '请输入父亲去世时你的年龄',
                digits:'只能输入整数'
            },
            fatherEducation:{
                required : '请输入父亲学历',
                digits:'只能输入整数'
            },
            motherDeathYourAge:{
                required : '请输入母亲去世时你的年龄',
                digits:'只能输入整数'
            },
            motherEducation:{
                required : '请输入母亲学历',
                digits:'只能输入整数'
            },
            parentalSeparationYourAge:{
                required : '请输入父母分居时你的年龄',
                digits:'只能输入整数'
            },
            parentalDivorceYourAge:{
                required : '请输入父母离婚时你的年龄',
                digits:'只能输入整数'
            },
            brothersSistersTotal:{
                required : '请输入兄弟姐妹人数',
                digits:'只能输入整数'
            },
            brothersSistersRanking:{
                required : '请输入排行第几',
                digits:'只能输入整数'
            },
            counselingTotal:{
                required : '做过几次咨询',
                digits:'只能输入整数'
            },
            awayNowTotal:{
                required : '最近一次咨询距现在多少天',
                digits:'只能输入整数'
            },
            counselingAddress:{
                required : '最近一次咨询的地址',
            },
            diagnosisResult:{
                required : '最近一次诊断结果',
            },
            specificCircumstances:{
                required : '请输入具体情况',
            },
            specificCircumstances:{
                required : '请输入药物不良症状/无',
            },
            nation:{
                required : '请输入民族',
            },
            motherAge:{
                required : '请输入父亲的年龄',
                digits:'只能输入整数'
            },
            fatherAge:{
                required : '请输入母亲的年龄',
                digits:'只能输入整数'
            }
        },

        submitHandler: function() {
            var obj = $("#visitorForm").serializeObject();
            console.log(obj)
            $.post('/visitor/register/update',{json:JSON.stringify(obj)},function (result) {
                alert(result.message);
            });
        }
    });
});
// 返回顶部
var winH = $(window).height();

function formSub() {
    return $("#sub").click();
}

$('.eui-backTop').hide();
$(window).scroll(function(e) {
    var winT = $(window).scrollTop();
    if(winT>winH){
        $('.eui-backTop').fadeIn()
    }else{
        $('.eui-backTop').fadeOut()
    }
});

$('.eui-backTop').click(function(e) {
    $('html,body').animate({scrollTop:0},500)
});

// 展开收起
$(".upward").click(function(event) {
    var visitorIn = $(this).parents(".visitor").children(".visitorContent");
    if ($(visitorIn).css("display") == "none") {
        $(this).html("<i class="+"eui-icon"+">&#xe619;</i> 收起");
    }else{
        $(this).html("<i class="+"eui-icon"+">&#xe61a;</i> 展开");
    }
    $(this).parents(".visitor").children(".visitorContent").slideToggle();
});





</script>

</body>
</html>
