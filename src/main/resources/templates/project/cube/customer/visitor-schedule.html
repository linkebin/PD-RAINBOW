<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"  xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="UTF-8">
    <title>来访预约</title>
    <link rel="stylesheet" th:href="@{/Styles/themes/default/style.css}" media="all">
    <link rel="stylesheet" href="//apps.bdimg.com/libs/jqueryui/1.10.4/css/jquery-ui.min.css">
    <style>
        #ui-id-1{height: 200px; overflow: scroll;}
    </style>
</head>
<body>
    <div class="eui-bg-white eui-form visitorContent eui-padding20">
        <div class="eui-form-item">
            <label class="eui-form-label">预约客户</label>
            <div class="eui-input-inline">
                <input type="text" name="visitorName"  id="visitorName"  placeholder="请选择预约客户" class="eui-input eui-width400">
                <input type="hidden" id="visitorId">
            </div>
        </div>
        <div class="eui-form-item">
            <label class="eui-form-label">预约时间</label>
            <div class="eui-input-inline">
                <input type="text" name="visitorTime"   placeholder="请选择预约时间" class="eui-input eui-width400">
            </div>
        </div>
        <div class="eui-form-item">
            <label class="eui-form-label">预约描述</label>
            <div class="eui-input-inline">
                <input type="text" name="describe"   placeholder="请输入预约描述 15个字以内" class="eui-input eui-width400">
            </div>
        </div>

    </div>
    <input type="hidden" id="creator" th:value="${session.userSession.id}" />
<script src="/Scripts/module/eui.js" charset="utf-8"></script>
<script src="/Scripts/main.js" charset="utf-8"></script>
<script type="text/javascript" src="/Scripts/jquery-1.9.0.min.js"></script>


<script src="/Scripts/libs/ligerUI/js/ligerui.all.js" type="text/javascript"></script>
<script src="/pack.ajax.js" type="text/javascript"></script>
<script src="/Scripts/date2format.js" type="text/javascript"></script>
<script src="/Scripts/plugins/jquery.validate.js"></script>
    <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

    <script>

        $(function() {
            $('#visitorName').bind('input propertychange', function() {
                var textValue = $(this).val();
                var params = new Object();
                params.visitorName=textValue;
                params.creator=$('#creator').val();
                $.post('/visitor/register/listByparameter',{json:JSON.stringify(params),
                    page:1,
                    pagesize:100},function (result) {
                    var arr = new Array();
                    var projects1 = result.data.list;
                    for (var i=0;i<projects1.length;i++){
                        var obj = new Object();
                        obj.value=projects1[i].visitorName;
                        obj.visitorId=projects1[i].id;
                        arr.push(obj);
                    }
                    $( "#visitorName" ).autocomplete({
                        minLength: 0,
                        source: arr,
                        focus: function( event, ui ) {
                            return false;
                        },
                        select: function( event, ui ) {
                            $( "#visitorName" ).val( ui.item.value );
                            $( "#visitorId" ).val( ui.item.visitorId );
                            return false;
                        }
                    });
                });
            });



        });
    </script>
</body>
</html>